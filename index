<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨å±…å®ˆè­· - å¥åº·ç›£è­·ç³»çµ±</title>
    <meta name="theme-color" content="#3B82F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ç¨å±…å®ˆè­·">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iNDAiIGZpbGw9IiMzQjgyRjYiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiAyMWMtMS4xIDAtMi0uOS0yLTJzLjktMiAyLTIgMiAuOSAyIDItLjkgMi0yIDJ6bTYtNmgtMi43Yy0uMy0xLjItMS4yLTItMi4zLTJzLTIgLjgtMi4zIDJINmMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDJoMTJjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yeiIvPgo8L3N2Zz4KPC9zdmc+">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIueLrOWxheWuiOitkCAtIOWBpeW6t+eboeitt+ezu+e1sSIsCiAgInNob3J0X25hbWUiOiAi54us5bGF5a6I6K2QIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjM0I4MkY2IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRreUlpQm9aV2xuYUhROUlqRTVNaUlpSUhacFpYZENiM2c5SWpBZ01DQXhPVElnTVRreUlpQm1hV3hzUFNKdWIyNWxJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lQZ28xjcmVqZENCaWQzUjBhRDBpTVRreUlpQm9aV2xuYUhROUlqRTVNaUlpSUhKNFBTSTBNQ0lpSUdacGJHdzlJaU16UWpneVJqWWlMejRLUEhOMlp5QjRQU0kwT0NJZ2VUMGlORGdpSUhkcFpIUm9QU0k1TmlJZ2FHVnBaMmgwUFNJNU5pSWlJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lpSUdacGJHdzlJbmRvYVhSbElqNEtQSEJoZEdnZ1pEMGlUVEV5SURJeFl5MHhMakVnTUMweUxTNDVMVElnTWk1eklTNDVJRElnTWlBdU9TQXlJRElnTWkwdU9TQXlMVElnTWkxNmJUWXROaWd0TWk0M1l5MHVNeTB4TGpJdE1TNHlMVElnTWk0ekxUSXpJREl6TFRKekxUSWdMamd0TWk0eklESWdTRFpqTFRFdU1TQXdMVElnTGprdE1pQXljeUE1SURJZ01pMHljeTA1TFRJdE1pMHllaUlnTHo0S1BDOXpkbWMrQ2p3dmMzWm5QZ289IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .heartbeat {
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- ä¸»è¦æ‡‰ç”¨ä»‹é¢ -->
    <div id="mainApp" class="container mx-auto px-4 py-6 max-w-md">
        <!-- æ¨™é¡Œæ¬„ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">ç¨å±…å®ˆè­·</h1>
                    <p class="text-gray-600 text-sm">å¥åº·ç›£è­·ç³»çµ±</p>
                </div>
                <div class="text-3xl heartbeat">â¤ï¸</div>
            </div>
        </div>

        <!-- ç‹€æ…‹å¡ç‰‡ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">ç›®å‰ç‹€æ…‹</h2>
                <div id="statusIndicator" class="w-4 h-4 bg-green-500 rounded-full pulse-animation"></div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div class="text-center p-3 bg-blue-50 rounded-xl">
                    <div class="text-2xl mb-1">ğŸš¶â€â™‚ï¸</div>
                    <div class="text-sm text-gray-600">ä»Šæ—¥æ­¥æ•¸</div>
                    <div id="stepCount" class="text-lg font-semibold text-blue-600">3,247</div>
                </div>
                <div class="text-center p-3 bg-green-50 rounded-xl">
                    <div class="text-2xl mb-1">ğŸ’“</div>
                    <div class="text-sm text-gray-600">å¿ƒç‡</div>
                    <div id="heartRate" class="text-lg font-semibold text-green-600">72 bpm</div>
                </div>
            </div>
        </div>

        <!-- æ´»å‹•ç›£æ¸¬ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">æ´»å‹•ç›£æ¸¬</h2>
            
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                    <div class="flex items-center">
                        <span class="text-xl mr-3">ğŸŒ…</span>
                        <span class="text-gray-700">èµ·åºŠæ™‚é–“</span>
                    </div>
                    <span id="wakeTime" class="text-gray-600 font-medium">07:30</span>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                    <div class="flex items-center">
                        <span class="text-xl mr-3">ğŸ½ï¸</span>
                        <span class="text-gray-700">ç”¨é¤è¨˜éŒ„</span>
                    </div>
                    <span id="mealStatus" class="text-green-600 font-medium">å·²ç”¨é¤</span>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                    <div class="flex items-center">
                        <span class="text-xl mr-3">ğŸ </span>
                        <span class="text-gray-700">å±…å®¶æ´»å‹•</span>
                    </div>
                    <span id="homeActivity" class="text-blue-600 font-medium">æ­£å¸¸</span>
                </div>
            </div>
        </div>

        <!-- æ„Ÿæ¸¬å™¨æ§åˆ¶ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">æ„Ÿæ¸¬å™¨è¨­å®š</h2>
            <div class="space-y-3">
                <button id="enableStepCounter" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-200">
                    ğŸš¶â€â™‚ï¸ å•Ÿç”¨æ­¥æ•¸è¨ˆç®—
                </button>
                <button id="enableHeartRate" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-200">
                    ğŸ’“ å•Ÿç”¨å¿ƒç‡ç›£æ¸¬
                </button>
                <div id="sensorStatus" class="text-sm text-gray-600 text-center mt-2">
                    é»æ“ŠæŒ‰éˆ•å•Ÿç”¨çœŸå¯¦æ„Ÿæ¸¬å™¨
                </div>
            </div>
        </div>

        <!-- ç·Šæ€¥æŒ‰éˆ• -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">ç·Šæ€¥è¯çµ¡</h2>
            <button id="emergencyBtn" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-xl text-lg transition-colors duration-200">
                ğŸš¨ ç·Šæ€¥æ±‚åŠ©
            </button>
        </div>

        <!-- å®ˆè­·è€…è¯çµ¡ -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">å®ˆè­·è€…</h2>
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-xl">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold mr-3">æ</div>
                        <div>
                            <div class="font-medium text-gray-800">æå°æ˜</div>
                            <div class="text-sm text-gray-600">å…’å­</div>
                        </div>
                    </div>
                    <button class="text-blue-500 hover:text-blue-600 text-xl">ğŸ“</button>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-green-50 rounded-xl">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-semibold mr-3">ç‹</div>
                        <div>
                            <div class="font-medium text-gray-800">ç‹è­·ç†å¸«</div>
                            <div class="text-sm text-gray-600">ç…§è­·å“¡</div>
                        </div>
                    </div>
                    <button class="text-green-500 hover:text-green-600 text-xl">ğŸ“</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å®ˆè­·è€…ä»‹é¢ -->
    <div id="guardianApp" class="container mx-auto px-4 py-6 max-w-md hidden">
        <!-- å®ˆè­·è€…æ¨™é¡Œ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">å®ˆè­·è€…ä»‹é¢</h1>
                    <p class="text-gray-600 text-sm">ç›£è­· - æå¥¶å¥¶</p>
                </div>
                <button id="switchToMain" class="text-blue-500 hover:text-blue-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- è­¦å ±ç‹€æ…‹ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">è­¦å ±ç‹€æ…‹</h2>
            <div id="alertStatus" class="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-xl">
                <div class="flex items-center">
                    <span class="text-green-500 text-xl mr-3">âœ…</span>
                    <div>
                        <div class="font-medium text-green-800">ç‹€æ…‹æ­£å¸¸</div>
                        <div class="text-sm text-green-600">æœ€å¾Œæ›´æ–°ï¼šå‰›å‰›</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ´»å‹•æ‘˜è¦ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">ä»Šæ—¥æ´»å‹•æ‘˜è¦</h2>
            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">èµ·åºŠæ™‚é–“</span>
                    <span class="font-medium text-gray-800">07:30 âœ…</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">æ´»å‹•é‡</span>
                    <span class="font-medium text-blue-600">3,247 æ­¥</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">ç”¨é¤ç‹€æ³</span>
                    <span class="font-medium text-green-600">æ­£å¸¸ âœ…</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">å¿ƒç‡ç¯„åœ</span>
                    <span class="font-medium text-green-600">65-78 bpm</span>
                </div>
            </div>
        </div>

        <!-- ç•°å¸¸åµæ¸¬è¨­å®š -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">ç›£è­·è¨­å®š</h2>
            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">æ´»å‹•ç•°å¸¸è­¦å ±</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">å¿ƒç‡ç•°å¸¸è­¦å ±</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <span class="text-gray-700">é•·æ™‚é–“ç„¡æ´»å‹•è­¦å ±</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- è­¦å ±å½ˆçª— -->
    <div id="alertModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full slide-in">
            <div class="text-center">
                <div class="text-6xl mb-4">ğŸš¨</div>
                <h3 class="text-xl font-bold text-red-600 mb-2">ç·Šæ€¥è­¦å ±</h3>
                <p class="text-gray-700 mb-6">å·²ç™¼é€ç·Šæ€¥é€šçŸ¥çµ¦æ‰€æœ‰å®ˆè­·è€…</p>
                <button id="closeAlert" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-200">
                    ç¢ºèª
                </button>
            </div>
        </div>
    </div>

    <!-- å®‰è£æç¤ºæ©«å¹… -->
    <div id="installBanner" class="fixed top-0 left-0 right-0 bg-blue-600 text-white p-3 z-50 hidden">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <div class="flex items-center">
                <span class="text-lg mr-2">ğŸ“±</span>
                <div class="text-sm">
                    <div class="font-medium">å®‰è£åˆ°æ‰‹æ©Ÿ</div>
                    <div class="text-blue-100 text-xs">é»æ“Šå®‰è£ï¼ŒåƒçœŸæ­£çš„APPä¸€æ¨£ä½¿ç”¨</div>
                </div>
            </div>
            <div class="flex space-x-2">
                <button id="installApp" class="bg-white text-blue-600 px-3 py-1 rounded-lg text-sm font-medium">
                    å®‰è£
                </button>
                <button id="dismissInstall" class="text-blue-100 hover:text-white">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- å®‰è£èªªæ˜å½ˆçª— -->
    <div id="installModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full slide-in">
            <div class="text-center">
                <div class="text-6xl mb-4">ğŸ“±</div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">å®‰è£åˆ°æ‰‹æ©Ÿ</h3>
                
                <!-- iOS å®‰è£èªªæ˜ -->
                <div id="iosInstructions" class="text-left space-y-3 mb-6 hidden">
                    <p class="text-gray-700 text-sm font-medium">iPhone/iPad å®‰è£æ­¥é©Ÿï¼š</p>
                    <div class="space-y-2 text-sm text-gray-600">
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mr-3">1</span>
                            <span>é»æ“Š Safari åº•éƒ¨çš„ã€Œåˆ†äº«ã€æŒ‰éˆ• ğŸ“¤</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mr-3">2</span>
                            <span>é¸æ“‡ã€ŒåŠ å…¥ä¸»ç•«é¢ã€</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mr-3">3</span>
                            <span>é»æ“Šã€Œæ–°å¢ã€å®Œæˆå®‰è£</span>
                        </div>
                    </div>
                </div>

                <!-- Android å®‰è£èªªæ˜ -->
                <div id="androidInstructions" class="text-left space-y-3 mb-6 hidden">
                    <p class="text-gray-700 text-sm font-medium">Android å®‰è£æ­¥é©Ÿï¼š</p>
                    <div class="space-y-2 text-sm text-gray-600">
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mr-3">1</span>
                            <span>é»æ“Š Chrome å³ä¸Šè§’é¸å–® â‹®</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mr-3">2</span>
                            <span>é¸æ“‡ã€Œå®‰è£æ‡‰ç”¨ç¨‹å¼ã€</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mr-3">3</span>
                            <span>é»æ“Šã€Œå®‰è£ã€å®Œæˆ</span>
                        </div>
                    </div>
                </div>

                <!-- é€šç”¨èªªæ˜ -->
                <div id="generalInstructions" class="text-left space-y-3 mb-6">
                    <p class="text-gray-700 text-sm font-medium">å®‰è£å¾Œçš„å„ªé»ï¼š</p>
                    <div class="space-y-1 text-sm text-gray-600">
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">âœ“</span>
                            <span>åƒçœŸæ­£çš„APPä¸€æ¨£ä½¿ç”¨</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">âœ“</span>
                            <span>å¯é›¢ç·šä½¿ç”¨éƒ¨åˆ†åŠŸèƒ½</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">âœ“</span>
                            <span>æ›´å¿«çš„å•Ÿå‹•é€Ÿåº¦</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">âœ“</span>
                            <span>å…¨è¢å¹•é«”é©—</span>
                        </div>
                    </div>
                </div>

                <button id="closeInstallModal" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-200">
                    æˆ‘çŸ¥é“äº†
                </button>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å°èˆª -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2">
        <div class="flex justify-center space-x-8 max-w-md mx-auto">
            <button id="showMain" class="flex flex-col items-center py-2 text-blue-500">
                <span class="text-xl mb-1">ğŸ </span>
                <span class="text-xs">ä¸»é </span>
            </button>
            <button id="showGuardian" class="flex flex-col items-center py-2 text-gray-400 hover:text-blue-500">
                <span class="text-xl mb-1">ğŸ‘¥</span>
                <span class="text-xs">å®ˆè­·è€…</span>
            </button>
            <button id="showInstallGuide" class="flex flex-col items-center py-2 text-gray-400 hover:text-green-500">
                <span class="text-xl mb-1">ğŸ“±</span>
                <span class="text-xs">å®‰è£APP</span>
            </button>
            <button id="simulateAlert" class="flex flex-col items-center py-2 text-gray-400 hover:text-orange-500">
                <span class="text-xl mb-1">âš ï¸</span>
                <span class="text-xs">æ¸¬è©¦è­¦å ±</span>
            </button>
        </div>
    </div>

    <script>
        // æ‡‰ç”¨ç‹€æ…‹ç®¡ç†
        let currentView = 'main';
        let activityBaseline = {
            wakeTime: '07:30',
            sleepTime: '22:00',
            dailySteps: 3000,
            heartRateRange: [60, 80]
        };
        
        let currentData = {
            steps: 3247,
            heartRate: 72,
            lastActivity: new Date(),
            isActive: true
        };

        // DOM å…ƒç´ 
        const mainApp = document.getElementById('mainApp');
        const guardianApp = document.getElementById('guardianApp');
        const alertModal = document.getElementById('alertModal');
        const installModal = document.getElementById('installModal');
        const installBanner = document.getElementById('installBanner');
        const emergencyBtn = document.getElementById('emergencyBtn');
        const enableStepCounterBtn = document.getElementById('enableStepCounter');
        const enableHeartRateBtn = document.getElementById('enableHeartRate');
        const sensorStatus = document.getElementById('sensorStatus');
        const showMainBtn = document.getElementById('showMain');
        const showGuardianBtn = document.getElementById('showGuardian');
        const switchToMainBtn = document.getElementById('switchToMain');
        const simulateAlertBtn = document.getElementById('simulateAlert');
        const showInstallGuideBtn = document.getElementById('showInstallGuide');
        const closeAlertBtn = document.getElementById('closeAlert');
        const closeInstallModalBtn = document.getElementById('closeInstallModal');
        const installAppBtn = document.getElementById('installApp');
        const dismissInstallBtn = document.getElementById('dismissInstall');

        // PWA å®‰è£ç›¸é—œ
        let deferredPrompt;
        let isInstallable = false;

        // åˆ‡æ›è¦–åœ–åŠŸèƒ½
        function switchView(view) {
            currentView = view;
            
            if (view === 'main') {
                mainApp.classList.remove('hidden');
                guardianApp.classList.add('hidden');
                showMainBtn.classList.add('text-blue-500');
                showMainBtn.classList.remove('text-gray-400');
                showGuardianBtn.classList.add('text-gray-400');
                showGuardianBtn.classList.remove('text-blue-500');
            } else if (view === 'guardian') {
                mainApp.classList.add('hidden');
                guardianApp.classList.remove('hidden');
                showGuardianBtn.classList.add('text-blue-500');
                showGuardianBtn.classList.remove('text-gray-400');
                showMainBtn.classList.add('text-gray-400');
                showMainBtn.classList.remove('text-blue-500');
            }
        }

        // ç•°å¸¸åµæ¸¬ç®—æ³•
        function detectAnomalies() {
            const alerts = [];
            const now = new Date();
            const timeSinceLastActivity = (now - currentData.lastActivity) / (1000 * 60); // åˆ†é˜

            // æª¢æŸ¥é•·æ™‚é–“ç„¡æ´»å‹•
            if (timeSinceLastActivity > 120) { // 2å°æ™‚ç„¡æ´»å‹•
                alerts.push({
                    type: 'inactivity',
                    message: 'é•·æ™‚é–“ç„¡æ´»å‹•åµæ¸¬',
                    severity: 'high'
                });
            }

            // æª¢æŸ¥å¿ƒç‡ç•°å¸¸
            if (currentData.heartRate < activityBaseline.heartRateRange[0] || 
                currentData.heartRate > activityBaseline.heartRateRange[1]) {
                alerts.push({
                    type: 'heartRate',
                    message: 'å¿ƒç‡ç•°å¸¸',
                    severity: 'medium'
                });
            }

            // æª¢æŸ¥æ´»å‹•é‡ç•°å¸¸
            if (currentData.steps < activityBaseline.dailySteps * 0.3) {
                alerts.push({
                    type: 'lowActivity',
                    message: 'æ´»å‹•é‡éä½',
                    severity: 'low'
                });
            }

            return alerts;
        }

        // ç™¼é€è­¦å ±çµ¦å®ˆè­·è€…
        function sendAlertToGuardians(alertType, message) {
            // æ¨¡æ“¬ Firebase Cloud Functions è­¦å ±ç™¼é€
            console.log(`ç™¼é€è­¦å ±: ${alertType} - ${message}`);
            
            // æ›´æ–°å®ˆè­·è€…ä»‹é¢çš„è­¦å ±ç‹€æ…‹
            const alertStatus = document.getElementById('alertStatus');
            alertStatus.className = 'p-4 bg-red-50 border-l-4 border-red-500 rounded-r-xl';
            alertStatus.innerHTML = `
                <div class="flex items-center">
                    <span class="text-red-500 text-xl mr-3">ğŸš¨</span>
                    <div>
                        <div class="font-medium text-red-800">${message}</div>
                        <div class="text-sm text-red-600">è­¦å ±æ™‚é–“ï¼š${new Date().toLocaleTimeString('zh-TW')}</div>
                    </div>
                </div>
            `;

            // 3ç§’å¾Œæ¢å¾©æ­£å¸¸ç‹€æ…‹ï¼ˆæ¨¡æ“¬è™•ç†å®Œæˆï¼‰
            setTimeout(() => {
                alertStatus.className = 'p-4 bg-green-50 border-l-4 border-green-500 rounded-r-xl';
                alertStatus.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-green-500 text-xl mr-3">âœ…</span>
                        <div>
                            <div class="font-medium text-green-800">ç‹€æ…‹æ­£å¸¸</div>
                            <div class="text-sm text-green-600">æœ€å¾Œæ›´æ–°ï¼šå‰›å‰›</div>
                        </div>
                    </div>
                `;
            }, 3000);
        }

        // çœŸå¯¦æ„Ÿæ¸¬å™¨æ•¸æ“šç²å–
        let sensorData = {
            accelerometer: null,
            gyroscope: null,
            stepCounter: 0,
            isTracking: false
        };

        // è«‹æ±‚æ„Ÿæ¸¬å™¨æ¬Šé™
        async function requestSensorPermissions() {
            try {
                // è«‹æ±‚å‹•ä½œæ„Ÿæ¸¬å™¨æ¬Šé™ï¼ˆiOS 13+ï¼‰
                if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                    const permission = await DeviceMotionEvent.requestPermission();
                    if (permission === 'granted') {
                        console.log('å‹•ä½œæ„Ÿæ¸¬å™¨æ¬Šé™å·²ç²å¾—');
                        return true;
                    }
                }
                return true; // Android æˆ–è¼ƒèˆŠçš„ iOS ç‰ˆæœ¬
            } catch (error) {
                console.log('æ„Ÿæ¸¬å™¨æ¬Šé™è«‹æ±‚å¤±æ•—:', error);
                return false;
            }
        }

        // åˆå§‹åŒ–åŠ é€Ÿåº¦è¨ˆï¼ˆç”¨æ–¼æ­¥æ•¸è¨ˆç®—ï¼‰
        function initAccelerometer() {
            if (window.DeviceMotionEvent) {
                window.addEventListener('devicemotion', handleMotionEvent);
                sensorData.isTracking = true;
                console.log('åŠ é€Ÿåº¦è¨ˆå·²å•Ÿå‹•');
            } else {
                console.log('è¨­å‚™ä¸æ”¯æ´åŠ é€Ÿåº¦è¨ˆ');
            }
        }

        // è™•ç†å‹•ä½œäº‹ä»¶ï¼ˆæ­¥æ•¸åµæ¸¬ï¼‰
        let lastStepTime = 0;
        let stepThreshold = 1.2; // æ­¥æ•¸åµæ¸¬é–¾å€¼
        let stepBuffer = [];

        function handleMotionEvent(event) {
            if (!event.accelerationIncludingGravity) return;

            const { x, y, z } = event.accelerationIncludingGravity;
            const acceleration = Math.sqrt(x*x + y*y + z*z);
            
            // ç°¡å–®çš„æ­¥æ•¸åµæ¸¬ç®—æ³•
            const currentTime = Date.now();
            stepBuffer.push({ acceleration, time: currentTime });
            
            // ä¿æŒæœ€è¿‘1ç§’çš„æ•¸æ“š
            stepBuffer = stepBuffer.filter(data => currentTime - data.time < 1000);
            
            // åµæ¸¬æ­¥æ•¸ï¼ˆå°‹æ‰¾åŠ é€Ÿåº¦å³°å€¼ï¼‰
            if (stepBuffer.length > 10) {
                const avgAcceleration = stepBuffer.reduce((sum, data) => sum + data.acceleration, 0) / stepBuffer.length;
                
                if (acceleration > avgAcceleration + stepThreshold && 
                    currentTime - lastStepTime > 300) { // æœ€å°‘é–“éš”300ms
                    sensorData.stepCounter++;
                    lastStepTime = currentTime;
                    currentData.lastActivity = new Date();
                    
                    // æ›´æ–°UI
                    currentData.steps = sensorData.stepCounter;
                    document.getElementById('stepCount').textContent = currentData.steps.toLocaleString();
                }
            }
        }

        // å¿ƒç‡ç›£æ¸¬ï¼ˆä½¿ç”¨ç›¸æ©Ÿå’Œé–ƒå…‰ç‡ˆï¼‰
        let heartRateMonitor = {
            isMonitoring: false,
            videoElement: null,
            canvas: null,
            context: null,
            samples: [],
            sampleRate: 30 // fps
        };

        async function initHeartRateMonitor() {
            try {
                // è«‹æ±‚ç›¸æ©Ÿæ¬Šé™
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        facingMode: 'environment', // å¾Œç½®ç›¸æ©Ÿ
                        width: { ideal: 320 },
                        height: { ideal: 240 }
                    }
                });

                // å‰µå»ºéš±è—çš„è¦–é »å…ƒç´ 
                heartRateMonitor.videoElement = document.createElement('video');
                heartRateMonitor.videoElement.srcObject = stream;
                heartRateMonitor.videoElement.play();

                // å‰µå»º canvas ç”¨æ–¼åœ–åƒè™•ç†
                heartRateMonitor.canvas = document.createElement('canvas');
                heartRateMonitor.context = heartRateMonitor.canvas.getContext('2d');

                // å˜—è©¦é–‹å•Ÿé–ƒå…‰ç‡ˆ
                const track = stream.getVideoTracks()[0];
                if (track.getCapabilities && track.getCapabilities().torch) {
                    await track.applyConstraints({
                        advanced: [{ torch: true }]
                    });
                }

                heartRateMonitor.isMonitoring = true;
                startHeartRateDetection();
                console.log('å¿ƒç‡ç›£æ¸¬å·²å•Ÿå‹•');

            } catch (error) {
                console.log('å¿ƒç‡ç›£æ¸¬åˆå§‹åŒ–å¤±æ•—:', error);
                // å›é€€åˆ°æ¨¡æ“¬æ•¸æ“š
                useSimulatedHeartRate();
            }
        }

        function startHeartRateDetection() {
            if (!heartRateMonitor.isMonitoring) return;

            const video = heartRateMonitor.videoElement;
            const canvas = heartRateMonitor.canvas;
            const context = heartRateMonitor.context;

            canvas.width = video.videoWidth || 320;
            canvas.height = video.videoHeight || 240;

            // æ¯33msæ¡æ¨£ä¸€æ¬¡ï¼ˆ30fpsï¼‰
            const sampleInterval = setInterval(() => {
                if (!heartRateMonitor.isMonitoring) {
                    clearInterval(sampleInterval);
                    return;
                }

                // ç¹ªè£½è¦–é »å¹€åˆ° canvas
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // ç²å–åœ–åƒæ•¸æ“š
                const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;

                // è¨ˆç®—å¹³å‡ç´…è‰²å€¼ï¼ˆè¡€æ¶²ä¸­çš„è¡€ç´…è›‹ç™½æœƒå¸æ”¶ç¶ å…‰ï¼Œåå°„ç´…å…‰ï¼‰
                let redSum = 0;
                for (let i = 0; i < data.length; i += 4) {
                    redSum += data[i]; // ç´…è‰²é€šé“
                }
                const avgRed = redSum / (data.length / 4);

                // è¨˜éŒ„æ¨£æœ¬
                heartRateMonitor.samples.push({
                    value: avgRed,
                    timestamp: Date.now()
                });

                // ä¿æŒæœ€è¿‘30ç§’çš„æ¨£æœ¬
                const thirtySecondsAgo = Date.now() - 30000;
                heartRateMonitor.samples = heartRateMonitor.samples.filter(
                    sample => sample.timestamp > thirtySecondsAgo
                );

                // æ¯10ç§’è¨ˆç®—ä¸€æ¬¡å¿ƒç‡
                if (heartRateMonitor.samples.length >= 300) { // 10ç§’ * 30fps
                    calculateHeartRate();
                }

            }, 1000 / heartRateMonitor.sampleRate);
        }

        function calculateHeartRate() {
            const samples = heartRateMonitor.samples;
            if (samples.length < 150) return; // è‡³å°‘éœ€è¦5ç§’çš„æ•¸æ“š

            // ä½¿ç”¨ç°¡å–®çš„å³°å€¼æª¢æ¸¬ç®—æ³•
            const values = samples.map(s => s.value);
            const mean = values.reduce((a, b) => a + b) / values.length;
            
            // æ‰¾å‡ºå³°å€¼
            let peaks = 0;
            let lastPeakTime = 0;
            
            for (let i = 1; i < samples.length - 1; i++) {
                const current = values[i];
                const prev = values[i - 1];
                const next = values[i + 1];
                
                // æª¢æ¸¬å³°å€¼ï¼ˆç•¶å‰å€¼å¤§æ–¼å‰å¾Œå€¼ä¸”å¤§æ–¼å¹³å‡å€¼ï¼‰
                if (current > prev && current > next && current > mean * 1.02) {
                    const currentTime = samples[i].timestamp;
                    
                    // ç¢ºä¿å³°å€¼é–“éš”åˆç†ï¼ˆ300ms-2000msï¼Œå°æ‡‰200-30 BPMï¼‰
                    if (currentTime - lastPeakTime > 300 && currentTime - lastPeakTime < 2000) {
                        peaks++;
                    }
                    lastPeakTime = currentTime;
                }
            }

            // è¨ˆç®—å¿ƒç‡ï¼ˆæ¯åˆ†é˜å¿ƒè·³æ•¸ï¼‰
            const timeSpan = (samples[samples.length - 1].timestamp - samples[0].timestamp) / 1000; // ç§’
            const heartRate = Math.round((peaks / timeSpan) * 60);

            // é©—è­‰å¿ƒç‡æ˜¯å¦åœ¨åˆç†ç¯„åœå…§
            if (heartRate >= 40 && heartRate <= 200) {
                currentData.heartRate = heartRate;
                document.getElementById('heartRate').textContent = `${heartRate} bpm`;
                console.log(`æª¢æ¸¬åˆ°å¿ƒç‡: ${heartRate} BPM`);
            }
        }

        // å›é€€åˆ°æ¨¡æ“¬å¿ƒç‡ï¼ˆç•¶ç„¡æ³•ä½¿ç”¨ç›¸æ©Ÿæ™‚ï¼‰
        function useSimulatedHeartRate() {
            setInterval(() => {
                // åŸºæ–¼æ´»å‹•é‡èª¿æ•´å¿ƒç‡
                const baseHeartRate = 70;
                const activityFactor = Math.min(currentData.steps / 100, 30); // æ¯100æ­¥å¢åŠ å¿ƒç‡
                const randomVariation = (Math.random() - 0.5) * 6; // Â±3 BPMéš¨æ©Ÿè®ŠåŒ–
                
                currentData.heartRate = Math.round(baseHeartRate + activityFactor + randomVariation);
                currentData.heartRate = Math.max(50, Math.min(120, currentData.heartRate));
                
                document.getElementById('heartRate').textContent = `${currentData.heartRate} bpm`;
            }, 5000); // æ¯5ç§’æ›´æ–°ä¸€æ¬¡
        }

        // æ•´åˆå¥åº·æ•¸æ“šæ›´æ–°
        function updateHealthData() {
            // å¦‚æœæ²’æœ‰ä½¿ç”¨çœŸå¯¦æ„Ÿæ¸¬å™¨ï¼Œå‰‡ä½¿ç”¨æ¨¡æ“¬æ•¸æ“š
            if (!sensorData.isTracking) {
                currentData.steps += Math.floor(Math.random() * 5);
                document.getElementById('stepCount').textContent = currentData.steps.toLocaleString();
            }

            // æ›´æ–°æœ€å¾Œæ´»å‹•æ™‚é–“
            if (Math.random() > 0.7) {
                currentData.lastActivity = new Date();
            }

            // åŸ·è¡Œç•°å¸¸åµæ¸¬
            const alerts = detectAnomalies();
            if (alerts.length > 0) {
                alerts.forEach(alert => {
                    if (alert.severity === 'high') {
                        sendAlertToGuardians(alert.type, alert.message);
                    }
                });
            }
        }

        // PWA å®‰è£åŠŸèƒ½
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            if (/iphone|ipad|ipod/.test(userAgent)) {
                return 'ios';
            } else if (/android/.test(userAgent)) {
                return 'android';
            }
            return 'other';
        }

        function showInstallInstructions() {
            const device = detectDevice();
            const iosInstructions = document.getElementById('iosInstructions');
            const androidInstructions = document.getElementById('androidInstructions');
            
            // éš±è—æ‰€æœ‰èªªæ˜
            iosInstructions.classList.add('hidden');
            androidInstructions.classList.add('hidden');
            
            // æ ¹æ“šè¨­å‚™é¡¯ç¤ºå°æ‡‰èªªæ˜
            if (device === 'ios') {
                iosInstructions.classList.remove('hidden');
            } else if (device === 'android') {
                androidInstructions.classList.remove('hidden');
            }
            
            installModal.classList.remove('hidden');
        }

        function checkInstallability() {
            // æª¢æŸ¥æ˜¯å¦å·²ç¶“å®‰è£
            if (window.matchMedia('(display-mode: standalone)').matches) {
                return false; // å·²ç¶“å®‰è£
            }
            
            // æª¢æŸ¥æ˜¯å¦æ”¯æ´ PWA
            if ('serviceWorker' in navigator && 'PushManager' in window) {
                return true;
            }
            
            return false;
        }

        // ç›£è½ PWA å®‰è£æç¤ºäº‹ä»¶
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            isInstallable = true;
            
            // é¡¯ç¤ºå®‰è£æ©«å¹…ï¼ˆå¦‚æœç”¨æˆ¶é‚„æ²’æœ‰æ‹’çµ•éï¼‰
            if (!localStorage.getItem('installDismissed')) {
                setTimeout(() => {
                    installBanner.classList.remove('hidden');
                }, 3000); // 3ç§’å¾Œé¡¯ç¤º
            }
        });

        // ç›£è½å®‰è£å®Œæˆäº‹ä»¶
        window.addEventListener('appinstalled', () => {
            console.log('PWA å®‰è£æˆåŠŸ');
            installBanner.classList.add('hidden');
            deferredPrompt = null;
            isInstallable = false;
        });

        // äº‹ä»¶ç›£è½å™¨
        emergencyBtn.addEventListener('click', () => {
            alertModal.classList.remove('hidden');
            sendAlertToGuardians('emergency', 'ç·Šæ€¥æ±‚åŠ©æŒ‰éˆ•è¢«æŒ‰ä¸‹');
        });

        // æ„Ÿæ¸¬å™¨å•Ÿç”¨æŒ‰éˆ•
        enableStepCounterBtn.addEventListener('click', async () => {
            sensorStatus.textContent = 'æ­£åœ¨å•Ÿç”¨æ­¥æ•¸è¨ˆç®—...';
            
            const hasPermission = await requestSensorPermissions();
            if (hasPermission) {
                initAccelerometer();
                enableStepCounterBtn.textContent = 'âœ… æ­¥æ•¸è¨ˆç®—å·²å•Ÿç”¨';
                enableStepCounterBtn.disabled = true;
                enableStepCounterBtn.classList.add('bg-gray-400');
                enableStepCounterBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                sensorStatus.textContent = 'æ­¥æ•¸è¨ˆç®—ä½¿ç”¨æ‰‹æ©ŸåŠ é€Ÿåº¦è¨ˆï¼Œè«‹å°‡æ‰‹æ©Ÿéš¨èº«æ”œå¸¶';
            } else {
                sensorStatus.textContent = 'ç„¡æ³•å•Ÿç”¨æ­¥æ•¸è¨ˆç®—ï¼Œå°‡ä½¿ç”¨æ¨¡æ“¬æ•¸æ“š';
            }
        });

        enableHeartRateBtn.addEventListener('click', async () => {
            sensorStatus.textContent = 'æ­£åœ¨å•Ÿç”¨å¿ƒç‡ç›£æ¸¬...';
            
            try {
                await initHeartRateMonitor();
                enableHeartRateBtn.textContent = 'âœ… å¿ƒç‡ç›£æ¸¬å·²å•Ÿç”¨';
                enableHeartRateBtn.disabled = true;
                enableHeartRateBtn.classList.add('bg-gray-400');
                enableHeartRateBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                sensorStatus.textContent = 'å¿ƒç‡ç›£æ¸¬ä½¿ç”¨ç›¸æ©Ÿå’Œé–ƒå…‰ç‡ˆï¼Œè«‹ç”¨æ‰‹æŒ‡è¼•å£“é¡é ­';
            } catch (error) {
                sensorStatus.textContent = 'ç„¡æ³•å•Ÿç”¨å¿ƒç‡ç›£æ¸¬ï¼Œå°‡ä½¿ç”¨æ™ºèƒ½æ¨¡æ“¬æ•¸æ“š';
                useSimulatedHeartRate();
            }
        });

        closeAlertBtn.addEventListener('click', () => {
            alertModal.classList.add('hidden');
        });

        closeInstallModalBtn.addEventListener('click', () => {
            installModal.classList.add('hidden');
        });

        showMainBtn.addEventListener('click', () => switchView('main'));
        showGuardianBtn.addEventListener('click', () => switchView('guardian'));
        switchToMainBtn.addEventListener('click', () => switchView('main'));

        showInstallGuideBtn.addEventListener('click', () => {
            showInstallInstructions();
        });

        installAppBtn.addEventListener('click', async () => {
            if (deferredPrompt && isInstallable) {
                // ä½¿ç”¨ç€è¦½å™¨åŸç”Ÿå®‰è£æç¤º
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    console.log('ç”¨æˆ¶æ¥å—å®‰è£');
                } else {
                    console.log('ç”¨æˆ¶æ‹’çµ•å®‰è£');
                }
                
                deferredPrompt = null;
                isInstallable = false;
                installBanner.classList.add('hidden');
            } else {
                // é¡¯ç¤ºæ‰‹å‹•å®‰è£èªªæ˜
                showInstallInstructions();
            }
        });

        dismissInstallBtn.addEventListener('click', () => {
            installBanner.classList.add('hidden');
            localStorage.setItem('installDismissed', 'true');
        });

        simulateAlertBtn.addEventListener('click', () => {
            // æ¨¡æ“¬ç•°å¸¸æƒ…æ³
            currentData.heartRate = 95; // è¨­ç½®ç•°å¸¸å¿ƒç‡
            currentData.lastActivity = new Date(Date.now() - 3 * 60 * 60 * 1000); // 3å°æ™‚å‰
            
            const alerts = detectAnomalies();
            if (alerts.length > 0) {
                sendAlertToGuardians('simulation', 'æ¨¡æ“¬ç•°å¸¸åµæ¸¬è­¦å ±');
            }
            
            // åˆ‡æ›åˆ°å®ˆè­·è€…è¦–åœ–æŸ¥çœ‹è­¦å ±
            setTimeout(() => switchView('guardian'), 500);
        });

        // åˆå§‹åŒ–æ‡‰ç”¨
        function initApp() {
            switchView('main');
            
            // æª¢æŸ¥å®‰è£ç‹€æ…‹
            if (checkInstallability()) {
                console.log('æ‡‰ç”¨å¯ä»¥å®‰è£');
            }
            
            // æ¯30ç§’æ›´æ–°ä¸€æ¬¡å¥åº·æ•¸æ“š
            setInterval(updateHealthData, 30000);
            
            // ç«‹å³æ›´æ–°ä¸€æ¬¡æ•¸æ“š
            updateHealthData();
            
            // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¨ªå•ï¼Œé¡¯ç¤ºå®‰è£æç¤º
            if (!localStorage.getItem('firstVisit')) {
                setTimeout(() => {
                    if (!window.matchMedia('(display-mode: standalone)').matches) {
                        showInstallInstructions();
                    }
                }, 5000);
                localStorage.setItem('firstVisit', 'true');
            }
        }

        // å•Ÿå‹•æ‡‰ç”¨
        initApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'974bb094c74ef1dc',t:'MTc1NjEzMTIwMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
